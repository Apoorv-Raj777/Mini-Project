/* safe_route.css
   Left controls (30%) + right map (70%) using existing components.css look
*/

.page-wrap {
  max-width: 1200px;
  margin: 28px auto;
  padding: 0 18px;
  display: grid;
  grid-template-columns: 30% 70%;
  gap: 20px;
  align-items: start;
}

/* left panel card */
.left-panel { padding: 18px; }

/* right map card */
.map-panel { padding: 0; position: relative; overflow: hidden; }

/* consistent card styling */
.card { background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.06); padding:18px; border-radius:12px; }

/* map */
#map { width:100%; height:560px; min-height:420px; border-radius:10px; }

/* route overlay info */
.route-info {
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 2200;
  padding: 8px 10px;
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.03);
  color: var(--muted);
  box-shadow: 0 8px 30px rgba(2,6,23,0.45);
}

/* route polyline classes — route.js should pass className */
.route-candidate { stroke-opacity: 0.95; stroke-width: 5; }
.route-best { stroke-width: 8; stroke-opacity: 1; stroke: var(--primary); }

/* fields & buttons (match Help Others) */
.field { margin-bottom:12px; display:flex; gap:12px; align-items:center; }
.field label { min-width:140px; color:var(--muted); font-weight:600; }
.field input[type="text"], .field select { flex:1; padding:10px 12px; border-radius:10px; border:none; background:rgba(255,255,255,0.03); color:var(--text); }

/* responsive */
@media (max-width: 900px) {
  .page-wrap { grid-template-columns: 1fr; padding: 0 14px; }
  #map { height: 320px; min-height: 280px; }
  .route-info { right: 8px; top: 8px; }
}

/* -----------------------------------------------
   FIX 1 — Make left panel inputs not overflow
--------------------------------------------------*/
.route-left-panel {
    position: relative;
    width: 100%;
    max-width: 340px; /* fits perfectly within 30% grid */
    z-index: 20;
}

/* Inputs should not sit under map */
.route-left-panel input[type="text"] {
    width: 100%;
    position: relative;
    z-index: 50; /* stays above suggestions but below map */
}

/* -----------------------------------------------
   FIX 2 — Suggestions dropdown appears BELOW input
--------------------------------------------------*/
.suggestions {
    position: absolute !important;
    top: calc(100% + 6px) !important; /* now shows BELOW input */
    left: 0 !important;
    width: 100% !important;
    max-width: 100% !important;

    background: rgba(10, 14, 28, 0.95);
    border-radius: 8px;
    padding: 6px 0;
    box-shadow: 0 4px 18px rgba(0,0,0,0.45);

    z-index: 9999; /* above map */
    overflow-y: auto;
    max-height: 240px;
}

/* Each suggestion item */
.suggestion-item {
    padding: 10px 12px;
    cursor: pointer;
    font-size: 0.95rem;
    line-height: 1.3;
    word-break: break-word;
}

.suggestion-item:hover {
    background: rgba(255,255,255,0.05);
}

/* -----------------------------------------------
   FIX 3 — Ensure left + right columns never overlap
--------------------------------------------------*/
.page-wrap {
    align-items: flex-start;
    overflow: visible; /* allow dropdown to expand */
}

.left-panel {
    overflow: visible;
    position: relative;
}

.map-panel {
    overflow: hidden; /* map stays contained */
}

/* === Directions panel: polished, compact, scrollable === */

#routeSteps {
  margin-top: 12px;
  padding: 10px;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.06);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 8px 30px rgba(0,0,0,0.45);
  color: #e6eef8;
  max-height: 320px;             /* keeps panel compact */
  overflow: hidden;              /* we control inner scrolling separately */
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* header area */
.route-steps-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding-bottom: 4px;
  border-bottom: 1px solid rgba(255,255,255,0.03);
}
.route-steps-header h3 {
  margin: 0;
  font-size: 1.05rem;
  letter-spacing: -0.2px;
}
.route-steps-meta {
  font-size: 0.9rem;
  color: rgba(230,238,248,0.75);
  display:flex;
  gap:10px;
  align-items:center;
}

/* toggle button */
#routeStepsToggle {
  background: transparent;
  border: 0;
  color: var(--primary, #7c5cff);
  cursor: pointer;
  font-weight: 600;
  padding: 6px 8px;
  border-radius: 8px;
}
#routeStepsToggle:hover { background: rgba(124,92,255,0.06); }

/* inner scroll area for list */
.route-steps-list {
  margin: 0;
  padding: 8px 6px;
  list-style: none;
  overflow-y: auto;
  flex: 1 1 auto;               /* allow list to take remaining height */
}

/* compact step items */
.route-step-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 10px;
  transition: background .12s, transform .06s;
  align-items: center;
}
.route-step-item + .route-step-item { margin-top: 6px; }
.route-step-item:hover {
  background: rgba(255,255,255,0.02);
  transform: translateY(-1px);
}

/* step number badge */
.route-step-num {
  min-width: 28px;
  height: 28px;
  border-radius: 8px;
  background: rgba(255,255,255,0.04);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  color: #fff;
  font-size:0.9rem;
}

/* main instruction text */
.route-step-text {
  flex: 1 1 auto;
  font-size: 0.95rem;
  line-height: 1.18;
  color: #e9f0fb;
  word-break: break-word;
}

/* small meta (road name / distance) on right */
.route-step-meta {
  text-align: right;
  min-width: 70px;
  font-size: 0.85rem;
  color: rgba(230,238,248,0.7);
}

/* road name line under instruction */
.route-step-road {
  display:block;
  font-size: 0.82rem;
  color: rgba(230,238,248,0.6);
  margin-top: 4px;
}

/* subtle divider at bottom of panel when expanded */
.route-steps-footer {
  font-size: 0.82rem;
  color: rgba(230,238,248,0.6);
  padding-top: 6px;
  border-top: 1px solid rgba(255,255,255,0.02);
  text-align: center;
}

/* Thin custom scrollbar for the list (WebKit) */
.route-steps-list::-webkit-scrollbar { width: 8px; }
.route-steps-list::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(124,92,255,0.22), rgba(124,92,255,0.12));
  border-radius: 8px;
}
/* Firefox */
.route-steps-list { scrollbar-width: thin; scrollbar-color: rgba(124,92,255,0.22) transparent; }

/* collapsed state helper */
#routeSteps.collapsed {
  max-height: 44px;
}
#routeSteps.collapsed .route-steps-list { display: none; }
#routeSteps.collapsed .route-steps-footer { display: none; }

/* === Mobile optimization: reduce directions box height === */
@media (max-width: 768px) {
  #routeSteps {
    max-height: 260px !important;   /* smaller box on mobile */
    padding: 8px;
  }

  .route-steps-list {
    padding: 6px !important;
  }

  .route-step-item {
    padding: 6px 8px !important;
  }

  .route-step-num {
    min-width: 24px !important;
    height: 24px !important;
    font-size: 0.82rem !important;
  }

  .route-step-text {
    font-size: 0.9rem !important;
  }

  .route-step-road {
    font-size: 0.78rem !important;
  }

  .route-step-meta {
    min-width: 55px !important;
    font-size: 0.78rem !important;
  }

  .route-steps-header h3 {
    font-size: 0.95rem !important;
  }

  #routeStepsToggle {
    font-size: 0.8rem !important;
    padding: 5px 6px !important;
  }
}
